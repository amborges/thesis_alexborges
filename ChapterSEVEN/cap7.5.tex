\section{Resultados}
\label{cap:7.5}

No capítulo \ref{cap:4} descrevemos todas as condições dos experimentos a serem realizados nesta tese e também abordamos o algoritmo desenvolvido para possibilitar uma transcodificação acelerada de VP9 para o AV1, adaptando-se a proposta para diversos formatos, conforme já abordado na seção \ref{cap:7.4}. Logo, seguindo-se a ordem cronológica de publicação dos formatos, conforme visto na Figura \ref{fig:1}, cinco transcodificadores foram implementados utilizando o \textit{pipeline} de processamento proposto: VP9 para AV1 (subseção \ref{cap:7.5.1}), H.264/AVC para AV1 (\ref{cap:7.5.2}), VP8 para AV1 (\ref{cap:7.5.3}), H.265/HEVC para AV1 (\ref{cap:7.5.4}) e H.266/VVC para AV1 (\ref{cap:7.5.5}). 

Antes de apresentar e discutir os resultados de transcodificação, vale destacar quais foram os modelos candidatos vencedores de cada uma das propostas implementadas, ou seja, a combinação de hiperparâmetros aprovados na Fase 3 do \textit{pipeline} (como visto na subseção \ref{cap:7.2.3} e seção \ref{cap:7.3}). A Tabela \ref{tab:XXV} apresenta a configuração de hiperparâmetros para cada um dos transcodificadores propostos neste capítulo. É possível observar que os quatro hiperparâmetros foram os mesmos em todos os treinamentos realizados na Fase 3: \textit{criterion} como ``\textit{entropy}'', \textit{splitter} como ``\textit{best}'', \textit{max depth} como 11 e \textit{min impurity decrease} como 0,60. Ou seja, em qualquer modelo preditivo treinado nas condições que impusemos, até 11 níveis de profundidade da árvore de decisão são permitidos, onde cada subparticionamento dessa árvore é feita pela melhor escolha possível, considerando uma impureza mínima de 0,60 pontos e utilizando o ganho de informação de Shannon que, segundo \citet{bib:CART_matematica} e \citet{bib:shannon_entropy}, quantifica a desordem dos dados em comparação com uma variável aleatória constante. Em outras palavras, o ganho de informação de Shannon identifica a desigualdade da informação e auxilia na tomada de decisão sobre qual atributo deve ser utilizado no particionamento da árvore de decisão. 

\input{TABLES/tab_xxv.tex}

Além dos quatro hiperparâmetros que são fixos nas cinco propostas de transcodificação rápida, observamos que os demais hiperparâmetros compõem dois conjuntos de configurações, que podem ser resumidos pelo \textit{max leaf nodes}, ou seja, a quantidade máxima de nós-folha da árvore de decisão, se 7 (transcodificadores VP9 e H.266/VVC) ou 19 (transcodificadores H.264/AVC, VP8 e H.265/HEVC). A proximidade dos valores dos hiperparâmetros, mesmo sob transcodificadores distintos, se explica pois os 25 atributos utilizados nas cinco propostas são os mesmos (médias de algum valor), inclusive havendo dez desses atributos tendo origem do mesmo codificador AV1. Apesar disso, os valores presentes nesses atributos podem variar e, consequentemente, as árvores geradas também serão diferentes. Como exemplo, apresentamos a Figura \ref{fig:34}, que mostra um modelo gerado para o formato VP9, para a profundidade 2 e CQ 43. Como é possível ver nesta figura, apesar da profundidade máxima ser 11, o modelo optou por ir até a profundidade 7. Também é possível observar a utilização de somente alguns atributos dos 25 disponíveis e, neste modelo preditivo em especial, foram utilizados os atributos de média de profundidade da zona A (decodificador, mesma posição do bloco em processamento); do tamanho do bloco da zona A; do tamanho do bloco da zona B (decodificador, posição acima do bloco em processamento); da orientação do bloco na zona B; da profundidade da zona C (codificador, posição acima do bloco em processamento); e do modo de predição da zona C.

\begin{figure}
    \centering
    \includegraphics[width=\textwidth]{FIGURES/fig_34.png}
    \caption{Uma árvore de decisão gerada pelos modelos propostos. Fonte: Elaborada pelo autor.}
    \label{fig:34}
\end{figure}

Destes 12 modelos treinados com o conjunto completo de dados de treinamento, conforme explicitado na subseção \ref{cap:7.2.3}, e configurados conforme a Tabela \ref{tab:XXV}, foi possível obter os valores de F1-Score para todos os modelos e todas as propostas de transcodificador, conforme apresentados na Tabela \ref{tab:XXVI}. Nesta tabela, evidenciamos que a média obtida para a transcodificação de VP9 para AV1 é a maior de todas, apesar de que todas as demais apresentam valores muito próximos. Portanto, a expectativa é que os resultados de transcodificação sejam também próximos, principalmente relacionados ao impacto na eficiência da codificação. Analisando os resultados individuais de cada modelo presente na Tabela \ref{tab:XXVI}, é possível notar que o valor de \textit{F1-Score} decai conforme a profundidade aumenta. Por exemplo, o modelo do CQ 20 e profundidade 0 do transcodificador de H.266/VVC para AV1 possui um \textit{F1-Score} de 0,9929, enquanto que o modelo relacionado à profundidade 2 possui o valor de 0,9412. Apesar de ser uma diferença pequena, que se reflete em maior ou menor grau nos demais casos similares, hipotetiza-se que essa diferença implique em um erro de decisão maior nas sequências que requisitem uma profundidade maior da árvore de particionamento. Em outras palavras, vídeos que necessitem de maiores detalhes devem ter um impacto na eficiência de codificação maior que em sequências onde blocos grandes são mais utilizados, basicamente, em cenas mais paradas ou com grandes áreas homogêneas. 

\input{TABLES/tab_xxvi.tex}

Por fim, antes de apresentar os resultados obtidos, é preciso relembrar que a média de aceleração observada na literatura, conforme foi visto no capítulo \ref{cap:3}, é de 50,74\% de TS e de 4,11\% de BD-rate. Também ressaltamos neste capítulo que a comparação direta de qualquer solução com a média observada não pode ser feita de forma justa, haja visto a necessidade de se equiparar não apenas os formatos de transcodificação, como também as sequências utilizadas, as configurações aplicadas e a aplicabilidade alvo da proposta. Destacado essa injustiça ao se realizar qualquer comparação, nesta tese serão aplicadas comparações superficiais com a média, tendo em vista a ausência de melhores trabalhos para comparações. Ressalta-se, ainda, que mesmo propostas com valores com menor destaque ao observado na média da literatura não implicam diretamente em propostas ruins, pois, como já dissemos, quaisquer análises de resultados desconsideram contextos intrínsecos dos trabalhos desenvolvidos naquelas propostas, tampouco sobre os formatos de transcodificação utilizados. Dessa forma, apesar do uso de correlações com a média observada na literatura ter seu propósito de criar expectativas, essa análise não valida ou invalida quaisquer resultados.


\subsection{Transcodificação Rápida de VP9-para-AV1}
\label{cap:7.5.1}

A Tabela \ref{tab:XXVII} dispõe de todos os resultados obtidos para o transcodificador rápido de VP9 para AV1. Observa-se uma aceleração média da transcodificação de 16,76\%, a um custo de elevar o BD-rate em 5,10\%. Os três melhores resultados desta transcodificação estão na resolução HD1080, cuja resolução foi utilizado para realizar os treinamentos dos modelos preditivos. Nesta resolução em especial (HD1080), observa-se um TS de 19,58\% e um BD-rate de 4,47\%. As três sequências que apresentaram maior destaque são: \textit{crowd\_run\_1080p50\_60f}, \textit{ducks\_take\_off\_1080p50\_60f} e \textit{guitar\_hdr\_amazon\_1080p}, respectivamente com acelerações iguais a 36,81\%, 37,35\% e 51,96\%. Inclusive, a sequência \textit{guitar\_hdr\_amazon\_1080p} apresentou o maior TS entre todos os resultados de transcodificação rápida de VP9 para AV1. Apesar de serem sequências com cenas bem distintas (como pode ser visto no Apêndice \ref{apx:A}), indo desde patos nadando em um lago até um grupo de pessoas correndo montanha abaixo, há algo que é similar entre eles: são cenas de movimento em toda a área do quadro. Isso indica que as sequências devam usar uma quantidade maior de blocos menores, sugerindo que os modelos preditivos, pelo menos para as profundidades 0 e 1, são eficientes em predizer corretamente o particionamento do bloco.

\input{TABLES/tab_xxvii.tex}

Se os resultados observados na resolução HD1080 apresentam resultados positivos em algumas condições, adaptar a proposta para uma resolução menor, como HD720, não trouxe impactos negativos. Inclusive, apresenta resultados similares de redução do tempo (média de 14,07\%) e de impacto na eficiência de codificação (média de 3,57\%) em relação aos resultados observados na resolução HD1080. Nesta resolução, a sequência com a menor Razão foi \textit{rain\_hdr\_amazon\_720p}, com 0,145 pontos, originários de uma aceleração de 7,37\% da transcodificação e um BD-rate de 1,06\%. A sequência HD720 que obteve o maior TS foi \textit{Netflix\_DinnerScene\_1280x720\_60fps\_8bit\_420\_120f} com 27,47\%, mas o BD-rate foi de 6,38\%. Coincidentemente, é com esta sequência de vídeo que se observa o maior BD-rate para a resolução HD720. Todavia, quase todos os vídeos UHD4K não apresentaram resultados satisfatórios de eficiência de codificação, com resultados de BD-rate superiores a 8\% e uma aceleração inferior à 22,98\% (vista na sequência \textit{Netflix\_Narrator\_4096x2160\_60fps\_10bit\_420\_60f}). A única exceção é \textit{Netflix\_ToddlerFountain\_4096x2160\_60fps\_10bit\_420\_60f}, que apresenta 2,82\% de BD-rate e 19,93\% de TS. 

Há, publicado na literatura científica, outra proposta de transcodificador rápido de VP9 para AV1, que desenvolvemos e apresentamos na seção \ref{cap:6.2}. Essa proposta apresentou uma redução de complexidade de 28,16\% a um custo na eficiência de codificação de 4,34\%. Essa proposta de transcodificador rápido não utiliza modelos preditivos para auxiliar nas decisões rápidas e, portanto, consegue apresentar uma média geral melhor que a proposta apresentada nesta subseção, baseada em modelos preditivos. Contudo, o trabalho descrito na seção \ref{cap:6.2} utiliza um conjunto menor de vídeos para avaliar os resultados, apesar de apresentar uma maior variedade de resoluções. Se considerarmos apenas as mesmas sequências utilizadas nas duas propostas, obteremos os dados apresentados na Tabela \ref{tab:XXVIII}, onde comparamos diretamente as duas propostas apresentadas nesta tese para a transcodificação rápida de VP9 para AV1.

\input{TABLES/tab_xxviii.tex}

Na Tabela \ref{tab:XXVIII} podemos observar que o impacto na eficiência de codificação gerado pela proposta baseada em modelos preditivos é menor que o da proposta baseada em heurística. Isso significa que os modelos treinados geram decisões mais assertivas, principalmente na resolução HD1080 (2,91\% contra os 4,60\%). Observe que as sequências \textit{crowd\_run\_1080p50\_60f} e \textit{Netflix\_Crosswalk\_1920x1080\_60fps\_8bit\_420\_60f} apresentaram resultados melhores, tanto em BD-rate como em TS, ao utilizar a proposta baseada em modelos preditivos. Todavia, a aceleração geral obtida com as propostas usando modelos preditivos é menor, em especial para a sequência \textit{park\_joy\_1080p50\_60f}, que foi acelerada em 42,67\% na proposta da seção 6.2 contra os 9,30\% da proposta deste capítulo.

Desta forma, foi preciso investigar a causa do valor de TS inferior. Identificou-se que o algoritmo de transcodificação rápida proposto, em especial na manipulação das matrizes citadas na subseção \ref{cap:7.4.1}, consomem um tempo de processamento significativamente elevado no transcodificador. Avaliando a sequência de vídeo \textit{crowd\_run\_1080p50\_60f} sob o nível de quantização 20, na transcodificação original esta tarefa foi executada em 60.466 segundos (ou 16,8 horas), enquanto que na transcodificação rápida a mesma sequência de vídeo foi processada em 42.181 segundos (11,7 horas). Apesar de podermos perceber uma redução do custo computacional em 30\% nesta única sequência, observaram-se 2.974 segundos (49,6 minutos) do tempo do transcodificador dedicados ao algoritmo desenvolvido, isto é, 7,05\%. O mesmo se observou em outra sequência de vídeo (\textit{pan\_hdr\_amazon\_1080p}) sob um nível de quantização diferente (CQ 43), que codificou em 24.484 segundos na transcodificação original contra os 19.424 segundos na transcodificação rápida, ou seja, atingiu uma redução de 20\% do tempo. No entanto, foram necessários 1.344 segundos na execução do algoritmo, ou seja, 6.92\% do tempo total da codificação do \textit{libaom}. Casos similares puderam ser vistos em outras sequências sob níveis de quantização diferentes, com consumos de tempo próximos a 7\%.

Portanto, conclui-se que é possível obter resultados melhores de redução de tempo, caso o algoritmo desenvolvido seja otimizado, a um teto de 7\%, caso sua execução atinja o tempo real. Assim sendo, dos resultados médios de aceleração da resolução HD1080, apresentados na Tabela \ref{tab:XXVII} (de 19,58\%), seria possível estimar um resultado de TS máximo de 26,57\%.

\subsection{Transcodificação Rápida de H.264/AVC-para-AV1}
\label{cap:7.5.2}

A proposta de transcodificador rápido desenvolvida de VP9 para AV1 foi adaptada de H.264/AVC para AV1, utilizando o \textit{pipeline} de processamento. Utilizando as mesmas sequências de vídeo descritas anteriormente, exceto para vídeos UHD4K, foi possível obter uma aceleração da transcodificação de 25,05\% a um custo de reduzir a eficiência de codificação em 5,58\%, como é possível notar na Tabela \ref{tab:XXIX}. Uma observação geral que pode ser vista nesta proposta de transcodificador, em relação ao caso VP9 para AV1, é que os resultados foram melhores para a resolução HD720, ao invés da resolução HD1080. O TS médio obtido na resolução HD720 foi de 30,52\%, contra os 18,67\% da resolução HD1080. Inclusive, o impacto na eficiência de codificação também é menor na resolução HD720 (5,30\% contra 5,91\%). Como o formato H.264/AVC foi desenvolvido para lidar principalmente com resoluções HD720 ou inferiores, supõe-se que as demais informações dos atributos, além das médias de profundidades e de tamanho de bloco, possam contribuir mais para a tomada de decisão nessas resoluções, mesmo utilizando um modelo preditivo treinado para uma resolução maior.

\input{TABLES/tab_xxix.tex}

Os principais destaques na transcodificação de H.264/AVC para AV1 são para as sequências \textit{boat\_hdr\_amazon\_720p}, \textit{rain\_hdr\_amazon\_720p}, \textit{crowd\_run\_1080p50\_60f} e \textit{seaplane\_hdr\_amazon\_1080p}, todos com menos de 0,06 pontos de Razão. Uma característica entre essas sequências é que há uma metade da cena relativamente estática e outra com muitos movimentos, geralmente de água ou de pessoas distantes. Isso significa que há uma mescla homogênea entre tamanhos de bloco, o que, somado às demais informações extraídas dos atributos do H.264/AVC em relação ao VP9, pode impulsionar uma melhora significativa dos resultados observados nesta proposta de transcodificador rápido.

No entanto, há sete sequências HD1080 na Tabela \ref{tab:XXIX} que podem ser enquadradas como resultados negativos, sendo que quatro delas ultrapassam a marca de 10\% de BD-rate. Em especial \textit{Netflix\_Crosswalk\_1920x1080\_60fps\_8bit\_420\_60f}, que apresenta a maior Razão entre todas as sequências, com 12,52\% de TS e 10,34\% de BD-rate. Nota-se uma inversão completa em relação à proposta de VP9 para AV1, onde esta mesma sequência foi uma das de maior destaque, apresentando 24,88\% de TS e 3,74\% de BD-rate. Não identificamos uma causa para essa inversão específica.

Como visto na Tabela \ref{tab:III}, não há outros trabalhos de transcodificação de H.264/AVC para AV1. Portanto, esta é uma proposta inédita de transcodificador rápido e não existem comparações diretas que possam ser feitas. Todavia, observa-se uma média de aceleração dos trabalhos apresentados na literatura científica com o dobro do percentual apresentado do transcodificador apresentado neste subseção. Apesar de não ser possível fazer uma comparação justa dos resultados deste transcodificador rápido com a média da literatura, como já abordamos no Capítulo \ref{cap:3}, ainda assim a redução média de um quarto do tempo do transcodificador rápido, em relação ao transcodificador original, é um resultado positivo.

Considerando os valores de razão próximos ao apresentado pela proposta desenvolvida nesta subseção (de 0,13), os nossos resultados podem ser comparados diretamente com os valores obtidos por \citet{bib:peixoto_2012} (52,75\% de TS e 5,49\% de BD-rate), \citet{bib:peixoto2_2014} (74,54\% de TS e 8,41\% de BD-rate) e \citet{bib:franche_2017} (87,32\% de TS e 3,28\% de BD-rate). Destes trabalhos, \citet{bib:franche_2017} também utiliza informações provenientes tanto do decodificador como do codificador, apesar de sua proposta ser baseada em heurísticas. Por outro lado, \citet{bib:peixoto2_2014} propõe uma solução baseada em modelos preditivos gerados por \textit{Linear Discriminant Function} \cite{bib:shumway_1974}.

\subsection{Transcodificação Rápida de VP8-para-AV1}
\label{cap:7.5.3}

O formato de codificação de vídeo VP8 é o antecessor do formato VP9 e, como visto anteriormente nesta tese, possui uma série de limitações em comparação aos formatos mais recentes. Por exemplo, o VP8 só permite dois tamanhos de blocos, cada um voltado para um tipo de predição específico: interquadros (blocos de 16$\times$16) e intraquadro (blocos de 4$\times$4). Além disso, o formato não tem a capacidade de trabalhar com vídeos HDR e nem com subamostragem diferente de 4:2:0. Tais limitações e diferenças significativas do  formato VP8, explicam, em parte, os resultados obtidos na Tabela \ref{tab:XXXI}. Nesta tabela, observamos que a proposta de transcodificador rápido de VP8 para AV1, baseado em modelos preditivos, atinge uma aceleração de 55,69\% em relação ao transcodificador original, a melhor média de TS dentre todas as propostas desta tese e similar ao observado na literatura. No entanto, a solução impacta a eficiência de codificação em 12,85\% de BD-rate e, mesmo assim, ainda é uma solução inédita na literatura.

\input{TABLES/tab_xxxi.tex}

Embora os resultados médios não sejam positivos em termos de eficiência de codificação, principalmente quando comparamos com a média da literatura, alguns destaques podem ser feitos, principalmente quanto à resolução HD1080. As três sequências de menor BD-rate são \textit{crowd\_run\_1080p50\_60f}, \textit{rush\_field\_cuts\_1080p\_60f} e \textit{park\_joy\_1080p50\_60f}, com respectivamente 1,55\%, 1,91\% e 2,22\% de BD-rate e com reduções de complexidade de 30,57\% 30,92\% e 54,74\%. Não encontrou-se uma similaridade direta entre essas três sequências. No entanto, após uma investigação avaliando outras características dos vídeos, percebeu-se que todos são vídeos com uma grande taxa de informação espacial (do inglês, \textit{Spatial Information}, SI). Conforme podemos ver na descrição das sequências no Apêndice \ref{apx:A}, as seis sequências HD1080 com mais de 60 pontos de SI são, em ordem crescente: \textit{ducks\_take\_off\_1080p50\_60f}, \textit{rush\_field\_cuts\_1080p\_60f}, \textit{Netflix\_Boat\_1920x1080\_60fps\_8bit\_420\_60f}, \textit{Netflix\_TunnelFlag\_1920x1080\_60fps\_8bit\_420\_60f}, \textit{park\_joy\_1080p50\_60f} e \textit{crowd\_run\_1080p50\_60f}. Destas, apenas a sequência \textit{Netflix\_TunnelFlag\_1920x1080\_60fps\_8bit\_420\_60f} apresenta resultados ruins para a solução proposta.

A sequência com a maior Razão é \textit{aspen\_1080p\_60f}. Observando os resultados de codificação dessa sequência, notamos uma perda de PSNR de -1,067dB no nível de quantização 55. Essa perda de qualidade somada ao aumento de 41,6\% da taxa de bits de \textit{aspen\_1080p\_60f} nesse nível de quantização, justificam o BD-rate de 24,19\%. Para exemplificar essa diferença de PSNR, apresentamos na Figura \ref{fig:35} uma parte de maior destaque do último quadro da sequência \textit{aspen\_1080p\_60f}. sob o nível de quantização 55. Os quadros apresentados na Figura \ref{fig:35} estão em diferentes momentos: Figura \ref{fig:35}(a) apresenta o quadro original, sem compressão seguido pela sua aparência após a decodificação do VP8 (Figura \ref{fig:35}(b)). Na Figura \ref{fig:35}(c) apresenta o quadro codificado pelo transcodificador original e Figura \ref{fig:35}(d) apresenta o quadro codificado pelo transcodificador rápido. Como é possível observar nestas figuras, nota-se uma perda da nitidez das folhas, em especial do interior delas. Apesar das ranhuras e das manchas da folha se perderem um pouco após a codificação por parte do VP8, ainda é possível percebê-las após a decodificação (Figura \ref{fig:35}(b)). Todavia, após a transcodificação para o AV1, quase todas as ranhuras se perdem, em especial quando transcodificadas pela nossa proposta rápida, restando na cena um borrão verde. E apesar da sequência \textit{aspen\_1080p\_60f}, assim como a maioria das sequências com BD-rate acima dos 20\%, também serem sequências com valores negativos na transcodificação de H.264/AVC para AV1, não foi possível identificar alguma característica intrínseca ao vídeo que auxiliasse na explicação desses valores elevados de BD-rate.

\begin{figure}
    \centering
    \includegraphics[width=\textwidth]{FIGURES/fig_35.png}
    \caption{Destaque do último quadro do vídeo \textit{aspen\_1080p\_60f} para as sequências (a) original, (b) decodificada pelo VP8, (c) transcodificada original para o AV1 e (d) transcodificada acelerada para o AV1. Fonte: Elaborada pelo autor.}
    \label{fig:35}
\end{figure}


\subsection{Transcodificação Rápida de H.265/HEVC-para-AV1}
\label{cap:7.5.4}

A Tabela \ref{tab:XXXIII} apresenta os resultados obtidos com a transcodificação rápida de H.265/HEVC para AV1, cujo algoritmo foi desenvolvido seguindo a mesma metodologia da proposta de VP9 para AV1. Nesta tabela, é possível observar que a solução é capaz de atingir uma aceleração da transcodificação de 28,36\%, a um custo de 6,74\% de BD-rate. A sequência de maior destaque é \textit{ducks\_take\_off\_1080p50\_60f}, com 41,64\% de TS e 4,10\% de BD-rate. Assim como os resultados de H.264/AVC e de VP8, na proposta para o H.265/HEVC observa-se uma maior redução de tempo nas sequências HD720 do que nas sequências HD1080, para os quais os modelos foram treinados. O fato de só haver uma única sequência HD720 que é caso destacadamente negativa (\textit{dark720p\_120f}), contra os cinco exemplos da resolução HD1080 (\textit{Netflix\_Aerial\_1920x1080\_60fps\_8bit\_420\_60f}, \textit{Netflix\_Crosswalk\_1920x1080\_60fps\_8bit\_420\_60f}, \textit{Netflix\_FoodMarket\_1920x1080\_60fps\_8bit\_420\_60f}, \textit{pedestrian\_area\_1080p25\_60f} e \textit{station2\_1080p25\_60f}) conta bastante para essa diferença em favor da resolução menor, mesmo que pequena. Outro ponto de destaque na proposta de H.265/HEVC para AV1 é que, diferentemente do que observamos no transcodificador rápido de VP9 para AV1, os resultados obtidos na transcodificação de vídeos UHD4K não são compostos por casos negativos. Apesar da baixa aceleração obtida, todos possuem valores de BD-rate baixos (menos de 3,2\%). Isso indica que as amostras geradas pelo decodificador H.265/HEVC em vídeos UHD4K fornecem dados mais confiáveis e de maior qualidade que os gerados pelo decodificador VP9.

\input{TABLES/tab_xxxiii.tex}

Há sete sequências que atingem um TS superior à 50\%, sendo que o de maior aceleração dentre eles é o \textit{Netflix\_RollerCoaster\_1280x720\_60fps\_8bit\_420\_120f}, com 55,26\% de TS. No entanto, todos possuem um BD-rate elevado, de aproximadamente 10\%. Por outro lado, a sequência \textit{seaplane\_hdr\_amazon\_1080p} é a que apresenta o menor BD-rate, com apenas 0,02\%. No entanto, também é a sequência com o menor TS de todo o conjunto de vídeos (0,47\%). Inclusive, quase todos os resultados obtidos com a solução H.265/HEVC para AV1 são próximos dos obtidos com a solução H.264/AVC para AV1, variando entre 2\% de BD-rate, para mais ou para menos. Há exceções (13 de 38 sequências, para ser preciso), cujos os dois maiores destaques são para \textit{dark720p\_120f}, que apresenta 15,33\% de BD-rate e 21,91\% de TS no H.265/HEVC contra os 9,15\% e 42,26\% no H.264/AVC; e a sequência \textit{old\_town\_cross\_1080p50\_60f} que obteve 14,05\% de BD-rate e 33,27\% de TS contra os 6,33\% de BD-rate e 21,54\% de TS. 

Não foi encontrado nenhuma relação entre os casos excepcionais que justificasse essa diferença nos resultados, assim como outra relação observada na Tabela \ref{tab:XXXIII}, de que todas as sequências HD1080 com 10 bits de profundidade (HDR) obtiveram um BD-rate inferior a 1\% e, ao mesmo tempo, são os vídeos com menor taxa de aceleração observada.

Há, na literatura científica, outros trabalhos que propõem soluções de transcodificação rápida de H.265/HEVC para AV1, os quais já foram apresentados na seção \ref{cap:6.1}. Além da nossa proposta desenvolvida na seção \ref{cap:6.1}, que apresenta resultados desde TS acima de 50\% ($La$:$Lb$ de 0:0, com 61,20\% de TS e 14,66\% de BD-rate) até menos de 5\% (por exemplo, $La$:$Lb$ de 4:2, com 4,60\% de TS e 0,0583\% de BD-rate), há o trabalho de \citet{bib:chen_2019}, com resultados de redução de TS em 37,8\% a um custo de 0,79\% do BD-rate. Apesar do resultado médio de TS observado na Tabela \ref{tab:XXXIII}, de 28,36\%, ser próximo ao do trabalho de \citet{bib:chen_2019}, inclusive com algumas sequências se aproximando da Razão apresentada por \citeauthor{bib:chen_2019} (de 0,021 pontos), no entanto, o BD-rate apresentado pelo nosso modelo é em ordens de grandeza diferentes.

Observa-se com a comparação da nossa proposta baseada em modelos preditivos com a proposta baseada em heurística, que os resultados médios se aproximam dos observados para a combinação $La$:$Lb$ iguais à 0:1, que apresenta um TS de 32\% e um BD-rate de 6,16\%. Ou senão, avaliando as razões de $La$:$Lb$, a solução proposta neste capítulo se aproxima dos resultados obtidos pelas combinações 0:3 (TS de 15,40\% e BD-rate de 3,58\%), 0:4 (TS de 15,10\% e BD-rate de 3,51\%) e 0:0 (TS de 61,20\% e BD-rate de 14,66\%), contudo, com resultados proporcionalmente melhores.

\subsection{Transcodificação Rápida de H.266/VVC-para-AV1}
\label{cap:7.5.5}

O formato de codificação de vídeo H.266/VVC é sucessor direto dos formatos H.265/HEVC e H.264/AVC. Assim sendo, espera-se observar resultados de redução de tempo similares. No entanto, ao observar os resultados de transcodificação na Tabela \ref{tab:XXXV}, notamos uma aceleração de apenas 12,05\%, mas acompanhado de uma redução considerável no impacto da eficiência de codificação, em relação às outras propostas apresentadas nesta tese, de apenas 1,67\% de BD-rate. O maior BD-rate foi atingido pela sequência \textit{dark720p\_120f}, com 6,12\%, que também apresenta a segunda maior aceleração da transcodificação de H.266/VVC para AV1, de 28,20\%.

\input{TABLES/tab_xxxv.tex}

Apesar da média de aceleração obtida pela transcodificação H.266/VVC para AV1 ser a menor, principalmente em relação aos padrões antecessores do H.266/VVC, o qual se esperava uma aceleração similar, o BD-rate obtido também foi o menor de todos os cinco transcodificadores propostos baseados em aprendizado de máquina. Observe que o \textit{F1-Score} médio dos modelos deste transcodificador (H.266/VVC para AV1) são os menores em relação a todos apresentados na Tabela \ref{tab:XXVI} e, mesmo assim, o BD-rate obtido pelo transcodificador é o menor de todos.

Não há na literatura científica um trabalho de transcodificação rápida de H.266/VVC para AV1, e apesar de haver outros trabalhos de transcodificadores rápidos com os antecessores do H.266/VVC, não é válido utilizá-los como comparação direta. Dos trabalhos existentes na literatura, apenas \citet{bib:lucas_2020} também utiliza o H.266/VVC, mas propondo uma transcodificação rápida de H.265/HEVC para H.266/VVC. Ou seja, \citet{bib:lucas_2020} propõe utilizar o H.266/VVC como formato destino; em contrapartida, nós propomos que o formato H.266/VVC seja o formato de origem. \cite{bib:lucas_2020} propõe utilizar um modelo treinado pelo algoritmo Naïve-Bayes para acelerar o particionamento de blocos 128$\times$128. Com isso, observa-se uma aceleração de 13,38\%, a um custo na eficiência de codificação de 0,32\% de BD-rate. Observa-se que ambas as propostas, a nossa e a de \citet{bib:lucas_2020}, apresentam baixos valores de TS e BD-rate.

Todavia, assim como destacamos sobre comparações entre as soluções propostas com a média observada na literatura, é importante ressaltar que não é possível realizar uma comparação direta entre a proposta de \citet{bib:lucas_2020} à solução apresentada nesta tese, pois são propostas baseadas em diferentes padrões e implementações de codificadores.

\subsection{Considerações Gerais e Análise do \textit{Pipeline} de Processamento}
\label{cap:7.5.6}

Nas subseções anteriores apresentamos todas as cinco propostas de transcodificador rápido usando modelos preditivos, sendo que o \textit{pipeline} de processamento foi desenvolvido para a geração de modelos para o transcodificador de VP9 para AV1 e depois adaptando para gerar modelos para outros transcodificadores com diferentes formatos de origem: H.264/AVC, VP8, H.265/HEVC e H.266/VVC. Tendo como base as mesmas sequências utilizadas para geração dos dados de treinamento e teste, vimos que o \textit{F1-Score} médio dos 12 modelos tende a superar os 0,96 pontos. Considerando algumas limitações de cada experimento, foram disponibilizadas as mesmas sequências para uso na fase preditiva dos modelos, o que possibilitou a geração dos dados comparativos entre o transcodificador original e a proposta de transcodificador rápido. No entanto, houve diferenças de sequências finalizadas em cada uma das propostas. Visando possibilitar uma comparação mais justa entre as cinco propostas de transcodificador rápido baseado em modelos preditivos, a Tabela \ref{tab:XXXVI} apresenta uma visão geral das cinco propostas, contudo, considerando as mesmas sequências de vídeo que estão presente em todas elas.

\input{TABLES/tab_xxxvi.tex}

Algumas observações imediatas são possíveis a partir da Tabela \ref{tab:XXXVI}. A primeira delas é a quantidade de sequências levemente inferior ao apresentado nas subseções anteriores. Mesmo assim, foram transcodificadas em todas as cinco propostas, nove na resolução HD720 e 13 na resolução HD1080. Considerando que os artigos existentes na literatura tendem a apresentar quatro sequências por resolução, então é possível afirmar que a confiabilidade dos resultados médios apresentados na Tabela \ref{tab:XXXVI} é superior ao usualmente aplicado na literatura. Outra observação possível é que a aceleração média atingida pelas propostas realizadas varia entre 13,83\% (de H.266/VVC para AV1) até 54,22\% (de VP8 para AV1), a um custo de impactar na eficiência de codificação desde 13,31\% (de VP8 para AV1) até apenas 1.94\% (de H.266/VVC para AV1). Com isso, é possível identificar os transcodificadores com resultados extremos, com a proposta de VP8 para AV1 sendo a que apresenta a maior Razão média, de 0,245, e a proposta de H.266/VVC para AV1 com a menor Razão média, de 0,140. Considerando que as outras três propostas apresentam uma Razão média com valores próximos ao observado na proposta de VP8 para AV1, é possível afirmar, então, que a proposta de transcodificador rápido de H.266/VVC para AV1 usando modelos preditivos é a que apresenta os melhores resultados nesta tese.

Avaliando os resultados que geraram a Tabela \ref{tab:XXXVI}, em especial na resolução HD1080 que é a resolução utilizada para treinamento dos modelos, é possível identificar quais sequências foram consistentes em apresentar os melhores resultados, sendo elas: \textit{crowd\_run\_1080p50\_60f}, \textit{rush\_field\_cuts\_1080p\_60f} e \textit{Netflix\_Boat\_1920x1080\_60fps\_8bit\_420\_60f}, que apresentaram uma média de aceleração, respectivamente, de 23,12\%, 20,36\% e 20,54\% a um custo de 1,39\%, 1,52\% e 1,79\% de BD-rate. Ou seja, foram sequências que apresentaram uma boa aceleração com baixo impacto na eficiência de codificação. Essas três sequências com resultados positivos apresentam boa quantidade de elementos em movimento em cenas distantes. Por outro lado, as três sequências com maior consistência negativa foram \textit{aspen\_1080p\_60f}, \textit{Netflix\_Crosswalk\_1920x1080\_60fps\_8bit\_420\_60f} e \textit{Netflix\_FoodMarket\_1920x1080\_60fps\_8bit\_420\_60f}, apresentando respectivamente valores médios de BD-rate de 13,73\%, 9,76\% e 9,15\%, acompanhados de uma aceleração média de 28,66\%, 19,55\% e 19,73\%. Ou seja, apesar dos valores de aceleração serem positivos para um objetivo de transcodificação rápida, os valores de BD-rate gerados nestas sequências são muito elevados, ainda mais considerando-se a média observada na literatura. A principal similaridade entre essas três sequências é a presença de movimento com texturas finas. Nas Figuras \ref{fig:36} e \ref{fig:37}, mostramos o primeiro quadro sem compressão dessas seis sequências.

\afterpage{
\clearpage
\begin{landscape}
\begin{figure}
    \centering
    \includegraphics[height=0.4\textheight]{FIGURES/fig_36_1.png}
    \includegraphics[height=0.4\textheight]{FIGURES/fig_36_2.png}
    \includegraphics[height=0.4\textheight]{FIGURES/fig_36_3.png}
    \caption{Primeiro quadro das sequências HD1080 de maior destaque positivo em todos os experimentos, acima \textit{crowd\_run\_1080p50\_60f}, no meio \textit{rush\_field\_cuts\_1080p\_60f} e abaixo \textit{Netflix\_Boat\_1920x1080\_60fps\_8bit\_420\_60f}. Fonte: Elaborada pelo autor.}
    \label{fig:36}
\end{figure}
\end{landscape}
}

Desta forma, considerando tudo o que já foi abordado até o momento, é possível concluir que há sequências de vídeos em que as propostas de transcodificadores rápidos desenvolvidas apresentam resultados de redução de complexidade e impacto na eficiência de codificação dentro de valores desejáveis, como pode ser visto na Tabela \ref{tab:XXXVI}. Inclusive, as sequências com os resultados negativos nos mostram que há uma fragilidade na precisão do modelo implementado. Como apontado anteriormente, o uso da técnica de balanceamento de dados \textit{undersampling} aplica uma redução da capacidade de discernimento no limite entre decisões binárias. Desta forma, é preciso investigar e avaliar os melhores balanceamentos dos conjuntos de dados utilizados para treinamento e teste dos modelos, de forma a reduzir essa imprecisão entre particionar ou não particionar.

\afterpage{
\clearpage
\begin{landscape}
\begin{figure}
    \centering
    \includegraphics[height=0.4\textheight]{FIGURES/fig_37_1.png}
    \includegraphics[height=0.4\textheight]{FIGURES/fig_37_2.png}
    \includegraphics[height=0.4\textheight]{FIGURES/fig_37_3.png}
    \caption{Primeiro quadro das sequências HD1080 de maior destaque negativo em todos os experimentos, acima \textit{aspen\_1080p\_60f}, no meio \textit{Netflix\_Crosswalk\_1920x1080\_60fps\_8bit\_420\_60f} e abaixo \textit{Netflix\_FoodMarket\_1920x1080\_60fps\_8bit\_420\_60f}. Fonte: Elaborada pelo autor.}
    \label{fig:37}
\end{figure}
\end{landscape}
}

